
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Link Example</title>
</head>
<body>

    <h1>Click the button to open the app</h1>
    <button id="openApp">Open My App</button>
    <p id="result"></p>

    <script>
        document.getElementById('openApp').addEventListener('click', () => {
            // const appDeepLink = 'pinfoapp://';
            const appDeepLink = 'whatsapp://';
            const fallbackURL = 'https://www.google.com';

            let appOpened = false;

            // Listen for visibility change
            const handleVisibilityChange = () => {
                if (document.visibilityState === 'hidden') {
                    appOpened = true;
                }
            };

            document.addEventListener('visibilitychange', handleVisibilityChange);

            // Attempt to open the app
            const startTime = Date.now();
            window.location.href = appDeepLink;

            // If app is not opened, redirect to fallback after a delay
            setTimeout(() => {
                const elapsedTime = Date.now() - startTime;
                if (!appOpened && elapsedTime > 1500) {
                    window.location.href = fallbackURL;
                }

                document.removeEventListener('visibilitychange', handleVisibilityChange);
            }, 1500);
        });
    </script>

</body>
</html>
